<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Webserv • Test</title>
  <style>
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif; background:#0f172a; color:#e2e8f0; }
    main { max-width: 760px; margin: 6vh auto; padding: 24px; background:#111827; border:1px solid #ffffff18; border-radius: 14px; }
    h1 { margin: 0 0 10px; }
    p { color:#94a3b8; }
    a { color:#22d3ee; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .box { margin-top:16px; padding:12px; border-radius:10px; background:#0b1222; border:1px solid #23324a; }
    label { display:block; margin:8px 0; }
    input[type="text"] { padding:6px 8px; border-radius:8px; border:1px solid #23324a; background:#0b1222; color:#e2e8f0; }
    button { margin-right:8px; padding:8px 12px; border-radius:8px; border:1px solid #23324a; background:#0b1222; color:#e2e8f0; cursor:pointer; }
    pre { white-space: pre-wrap; color:#cbd5e1; }
  </style>
</head>
<body>
  <main>
    <h1>Page de test</h1>
    <p>Cette page est servie depuis <code>www/test.html</code>.</p>

    <div class="box">
      <p>Liens utiles :</p>
      <ul>
        <li><a href="/">Accueil</a></li>
        <li><a href="/index.html">index.html</a></li>
        <li><a href="/test.html">test.html</a></li>
        <li><a href="/does-not-exist.html">404 (exemple)</a></li>
      </ul>
    </div>

    <!-- Formulaire POST -->
    <div class="box">
      <h2>Tester une requête POST</h2>
      <form id="postForm" method="POST" action="/post">
        <label>Message
          <input type="text" name="msg" value="Bonjour du navigateur" />
        </label>
        <button type="submit">Envoyer (submit)</button>
        <button type="button" id="btnFetch">Envoyer (fetch)</button>
      </form>
      <pre id="out"></pre>
    </div>
  </main>

  <script>
    (function(){
      var btn = document.getElementById('btnFetch');
      var form = document.getElementById('postForm');
      var out = document.getElementById('out');
      if (btn) btn.addEventListener('click', function(){
        var msg = form.elements['msg'].value;
        var body = 'msg=' + encodeURIComponent(msg);
        fetch('/post', {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: body
        }).then(function(res){
          return res.text().then(function(text){
            out.textContent = 'Status: ' + res.status + '\n\n' + text;
          });
        }).catch(function(err){
          out.textContent = 'Erreur: ' + err;
        });
      });
    })();
  </script>
</body>
</html>
